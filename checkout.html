<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh toán - VINTEK</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top">
        <div class="container">
            <a class="navbar-brand text-primary" href="home.html">
                <i class="bi bi-building"></i> VINTEK
            </a>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="bg-primary text-white py-4">
        <div class="container">
            <h1 class="h3 fw-bold mb-0"><i class="bi bi-credit-card"></i> Thanh Toán</h1>
        </div>
    </section>

    <!-- Checkout Form -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <!-- Form thông tin -->
                <div class="col-lg-7">
                    <div class="card shadow-sm mb-4">
                        <div class="card-body">
                            <h5 class="card-title fw-bold mb-4">Thông tin giao hàng</h5>
                            <form id="checkoutForm">
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">Số điện thoại</label>
                                    <input type="text" class="form-control" id="phoneNumber" readonly>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">Họ và tên *</label>
                                    <input type="text" class="form-control" id="fullName" required 
                                           placeholder="Nhập họ tên đầy đủ">
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">Địa chỉ giao hàng *</label>
                                    <textarea class="form-control" id="address" rows="3" required 
                                              placeholder="Số nhà, tên đường, phường/xã, quận/huyện, tỉnh/thành phố"></textarea>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">Ghi chú</label>
                                    <textarea class="form-control" id="note" rows="2" 
                                              placeholder="Ghi chú thêm về đơn hàng (không bắt buộc)"></textarea>
                                </div>

                                <!-- Voucher Section -->
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">Mã giảm giá</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="voucherCode" 
                                               placeholder="Nhập mã voucher">
                                        <button class="btn btn-outline-primary" type="button" onclick="applyVoucher()">
                                            <i class="bi bi-check-circle"></i> Áp dụng
                                        </button>
                                    </div>
                                    <div id="voucherMessage" class="small mt-1"></div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Phương thức thanh toán -->
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title fw-bold mb-4">Phương thức thanh toán</h5>
                            
                            <div class="form-check mb-3 p-3 border rounded">
                                <input class="form-check-input" type="radio" name="paymentMethod" 
                                       id="codPayment" value="cod" checked onchange="updatePaymentMethod()">
                                <label class="form-check-label w-100" for="codPayment">
                                    <div class="d-flex align-items-center">
                                        <i class="bi bi-cash-coin fs-3 text-success me-3"></i>
                                        <div>
                                            <strong>Thanh toán khi nhận hàng (COD)</strong>
                                            <p class="text-muted small mb-0">Thanh toán bằng tiền mặt khi nhận hàng</p>
                                        </div>
                                    </div>
                                </label>
                            </div>
                            
                            <div class="form-check p-3 border rounded">
                                <input class="form-check-input" type="radio" name="paymentMethod" 
                                       id="bankTransfer" value="bank" onchange="updatePaymentMethod()">
                                <label class="form-check-label w-100" for="bankTransfer">
                                    <div class="d-flex align-items-center">
                                        <i class="bi bi-bank fs-3 text-primary me-3"></i>
                                        <div>
                                            <strong>Chuyển khoản ngân hàng</strong>
                                            <p class="text-muted small mb-0">Giảm 1% khi thanh toán chuyển khoản</p>
                                        </div>
                                    </div>
                                </label>
                            </div>

                            <!-- Thông tin chuyển khoản -->
                            <div id="bankTransferInfo" class="mt-4" style="display: none;">
                                <div class="qr-code-box">
                                    <h6 class="fw-bold text-primary mb-3">Thông tin chuyển khoản</h6>
                                    <img src="https://img.vietqr.io/image/MB-8090112121997-compact2.png?amount=150000&addInfo=VINTEK%200123456789" 
                                         alt="QR Code" class="img-fluid" id="qrCodeImage" style="max-width: 250px; margin: 20px auto; display: block;">
                                    <div class="mt-3">
                                        <p class="mb-1"><strong>Ngân hàng:</strong> <span id="displayBankName">MB Bank</span></p>
                                        <p class="mb-1"><strong>Số tài khoản:</strong> <span id="displayBankAccount">8090112121997</span></p>
                                        <p class="mb-1"><strong>Chủ tài khoản:</strong> <span id="displayBankAccountName">NGUYEN VAN TU</span></p>
                                        <p class="mb-1"><strong>Nội dung:</strong> <span id="transferContent" class="text-primary fw-bold"></span></p>
                                        <p class="mb-0"><strong>Số tiền:</strong> <span id="transferAmount" class="text-danger fw-bold fs-5"></span></p>
                                    </div>
                                    <div class="alert alert-info mt-3 small">
                                        <i class="bi bi-info-circle"></i> Vui lòng chuyển khoản đúng nội dung để đơn hàng được xử lý nhanh chóng
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tóm tắt đơn hàng -->
                <div class="col-lg-5">
                    <div class="order-summary">
                        <h5 class="fw-bold mb-4">Đơn hàng của bạn</h5>
                        
                        <div id="orderItems" class="mb-4">
                            <!-- Order items will be loaded here -->
                        </div>
                        
                        <div class="summary-item">
                            <span>Tạm tính:</span>
                            <span id="subtotal">0đ</span>
                        </div>
                        
                        <div class="summary-item">
                            <span>Phí vận chuyển:</span>
                            <span id="shippingFee">30,010đ</span>
                        </div>
                        
                        <div class="summary-item" id="voucherDiscountRow" style="display: none;">
                            <span>
                                Voucher: <span class="text-success fw-semibold" id="appliedVoucherCode"></span>
                                <button class="btn btn-sm btn-link text-danger p-0 ms-2" onclick="removeVoucher()">
                                    <i class="bi bi-x-circle"></i>
                                </button>
                            </span>
                            <span class="text-success" id="voucherDiscountAmount">0đ</span>
                        </div>
                        
                        <div class="summary-item" id="discountRow" style="display: none;">
                            <span>Giảm giá (1%):</span>
                            <span class="text-success" id="discountAmount">0đ</span>
                        </div>
                        
                        <div class="summary-item border-0">
                            <span class="fw-bold fs-5">Tổng cộng:</span>
                            <span class="summary-total" id="totalAmount">0đ</span>
                        </div>
                        
                        <button type="button" class="btn btn-primary btn-lg w-100 mt-4" onclick="placeOrder()">
                            <i class="bi bi-check-circle"></i> Đặt hàng
                        </button>
                        
                        <a href="cart.html" class="btn btn-outline-secondary w-100 mt-2">
                            <i class="bi bi-arrow-left"></i> Quay lại giỏ hàng
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/checkout.js"></script>
</body>
</html>